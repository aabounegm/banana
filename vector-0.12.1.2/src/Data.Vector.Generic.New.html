<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP, Rank2Types, FlexibleContexts, MultiParamTypeClasses #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Module      : Data.Vector.Generic.New</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Copyright   : (c) Roman Leshchinskiy 2008-2010</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- License     : BSD-style</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Maintainer  : Roman Leshchinskiy &lt;rl@cse.unsw.edu.au&gt;</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Stability   : experimental</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Portability : non-portable</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Purely functional interface to initialisation of mutable vectors</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Vector.Generic.New</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier">New</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#create"><span class="hs-identifier">create</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#run"><span class="hs-identifier">run</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#runPrim"><span class="hs-identifier">runPrim</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier">apply</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#modify"><span class="hs-identifier">modify</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#modifyWithBundle"><span class="hs-identifier">modifyWithBundle</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-identifier">unstream</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#transform"><span class="hs-identifier">transform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstreamR"><span class="hs-identifier">unstreamR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#transformR"><span class="hs-identifier">transformR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#slice"><span class="hs-identifier">slice</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#init"><span class="hs-identifier">init</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#tail"><span class="hs-identifier">tail</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#take"><span class="hs-identifier">take</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#drop"><span class="hs-identifier">drop</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeSlice"><span class="hs-identifier">unsafeSlice</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeInit"><span class="hs-identifier">unsafeInit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeTail"><span class="hs-identifier">unsafeTail</span></a></span><span>
</span><span id="line-20"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Mutable.html"><span class="hs-identifier">Data.Vector.Generic.Mutable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MVector</span></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Vector.Generic.Base.html"><span class="hs-identifier">Data.Vector.Generic.Base</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier">Vector</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier">Mutable</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html"><span class="hs-identifier">Data.Vector.Fusion.Bundle</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#Bundle"><span class="hs-identifier">Bundle</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html"><span class="hs-identifier">Data.Vector.Fusion.Bundle</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bundle</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html"><span class="hs-identifier">Data.Vector.Fusion.Stream.Monadic</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-identifier">Stream</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.Size.html"><span class="hs-identifier">Data.Vector.Fusion.Bundle.Size</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Primitive</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.ST</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">ST</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">liftM</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">init</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tail</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">take</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">drop</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">reverse</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">map</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">filter</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-comment">-- Data.Vector.Internal.Check is unused</span><span class="hs-cpp">
#define NOT_VECTOR_MODULE
</span><span class="hs-cpp">#include &quot;vector.h&quot;
</span><span>
</span><span id="line-40"></span><span class="hs-keyword">data</span><span> </span><span id="New"><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span></span><span> </span><span id="local-6989586621679170284"><span class="annot"><a href="#local-6989586621679170284"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679170283"><span class="annot"><a href="#local-6989586621679170283"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="New"><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679170285"><span class="annot"><a href="#local-6989586621679170285"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ST</span></span><span> </span><span class="annot"><a href="#local-6989586621679170285"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170284"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170285"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170283"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span id="local-6989586621679170159"><span id="local-6989586621679170160"><span class="annot"><a href="Data.Vector.Generic.New.html#create"><span class="hs-identifier hs-type">create</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679170291"><span class="annot"><a href="#local-6989586621679170291"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ST</span></span><span> </span><span class="annot"><a href="#local-6989586621679170291"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170160"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170291"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170159"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170160"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170159"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-43"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#create"><span class="hs-pragma hs-type">create</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-44"></span><span id="create"><span class="annot"><span class="annottext">create :: (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#create"><span class="hs-identifier hs-var hs-var">create</span></a></span></span><span> </span><span id="local-6989586621679170158"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170158"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170158"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span id="local-6989586621679170155"><span id="local-6989586621679170156"><span id="local-6989586621679170157"><span class="annot"><a href="Data.Vector.Generic.New.html#run"><span class="hs-identifier hs-type">run</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170157"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170156"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ST</span></span><span> </span><span class="annot"><a href="#local-6989586621679170155"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170157"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170155"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170156"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-47"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#run"><span class="hs-pragma hs-type">run</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-48"></span><span id="run"><span class="annot"><span class="annottext">run :: New v a -&gt; ST s (Mutable v s a)
</span><a href="Data.Vector.Generic.New.html#run"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span id="local-6989586621679170154"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170154"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ST s (Mutable v s a)
forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170154"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span id="local-6989586621679170151"><span id="local-6989586621679170152"><span id="local-6989586621679170153"><span class="annot"><a href="Data.Vector.Generic.New.html#runPrim"><span class="hs-identifier hs-type">runPrim</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PrimMonad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170153"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170152"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170151"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679170153"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170152"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PrimState</span></span><span> </span><span class="annot"><a href="#local-6989586621679170153"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679170151"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-51"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#runPrim"><span class="hs-pragma hs-type">runPrim</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-52"></span><span id="runPrim"><span class="annot"><span class="annottext">runPrim :: New v a -&gt; m (Mutable v (PrimState m) a)
</span><a href="Data.Vector.Generic.New.html#runPrim"><span class="hs-identifier hs-var hs-var">runPrim</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span id="local-6989586621679170150"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170150"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ST (PrimState m) (Mutable v (PrimState m) a)
-&gt; m (Mutable v (PrimState m) a)
forall (m1 :: * -&gt; *) (m2 :: * -&gt; *) a.
(PrimBase m1, PrimMonad m2, PrimState m1 ~ PrimState m2) =&gt;
m1 a -&gt; m2 a
</span><span class="hs-identifier hs-var">primToPrim</span></span><span> </span><span class="annot"><span class="annottext">ST (PrimState m) (Mutable v (PrimState m) a)
forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170150"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span id="local-6989586621679170213"><span id="local-6989586621679170214"><span class="annot"><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-type">apply</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679170269"><span class="annot"><a href="#local-6989586621679170269"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170214"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170269"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170213"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170214"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170269"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170213"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170214"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170213"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170214"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170213"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-55"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#apply"><span class="hs-pragma hs-type">apply</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-56"></span><span id="apply"><span class="annot"><span class="annottext">apply :: (forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var hs-var">apply</span></a></span></span><span> </span><span id="local-6989586621679170148"><span class="annot"><span class="annottext">forall s. Mutable v s a -&gt; Mutable v s a
</span><a href="#local-6989586621679170148"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span id="local-6989586621679170147"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170147"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Mutable v s a -&gt; Mutable v s a)
-&gt; ST s (Mutable v s a) -&gt; ST s (Mutable v s a)
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span> </span><span class="annot"><span class="annottext">Mutable v s a -&gt; Mutable v s a
forall s. Mutable v s a -&gt; Mutable v s a
</span><a href="#local-6989586621679170148"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ST s (Mutable v s a)
forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170147"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span id="local-6989586621679170145"><span id="local-6989586621679170146"><span class="annot"><a href="Data.Vector.Generic.New.html#modify"><span class="hs-identifier hs-type">modify</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679170262"><span class="annot"><a href="#local-6989586621679170262"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170146"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170262"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170145"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ST</span></span><span> </span><span class="annot"><a href="#local-6989586621679170262"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170146"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170145"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170146"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170145"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-59"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#modify"><span class="hs-pragma hs-type">modify</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-60"></span><span id="modify"><span class="annot"><span class="annottext">modify :: (forall s. Mutable v s a -&gt; ST s ()) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#modify"><span class="hs-identifier hs-var hs-var">modify</span></a></span></span><span> </span><span id="local-6989586621679170144"><span class="annot"><span class="annottext">forall s. Mutable v s a -&gt; ST s ()
</span><a href="#local-6989586621679170144"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span id="local-6989586621679170143"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170143"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679170142"><span class="annot"><span class="annottext">Mutable v s a
</span><a href="#local-6989586621679170142"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ST s (Mutable v s a)
forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170143"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Mutable v s a -&gt; ST s ()
forall s. Mutable v s a -&gt; ST s ()
</span><a href="#local-6989586621679170144"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Mutable v s a
</span><a href="#local-6989586621679170142"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Mutable v s a -&gt; ST s (Mutable v s a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Mutable v s a
</span><a href="#local-6989586621679170142"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span id="local-6989586621679170138"><span id="local-6989586621679170139"><span id="local-6989586621679170140"><span id="local-6989586621679170141"><span class="annot"><a href="Data.Vector.Generic.New.html#modifyWithBundle"><span class="hs-identifier hs-type">modifyWithBundle</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679170256"><span class="annot"><a href="#local-6989586621679170256"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Mutable"><span class="hs-identifier hs-type">Mutable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170141"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170256"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170140"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#Bundle"><span class="hs-identifier hs-type">Bundle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170139"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170138"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ST</span></span><span> </span><span class="annot"><a href="#local-6989586621679170256"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170141"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170140"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#Bundle"><span class="hs-identifier hs-type">Bundle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170139"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170138"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170141"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170140"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-64"></span><span class="hs-pragma">{-# INLINE_FUSED modifyWithBundle #-}</span><span>
</span><span id="line-65"></span><span id="modifyWithBundle"><span class="annot"><span class="annottext">modifyWithBundle :: (forall s. Mutable v s a -&gt; Bundle u b -&gt; ST s ())
-&gt; New v a -&gt; Bundle u b -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#modifyWithBundle"><span class="hs-identifier hs-var hs-var">modifyWithBundle</span></a></span></span><span> </span><span id="local-6989586621679170137"><span class="annot"><span class="annottext">forall s. Mutable v s a -&gt; Bundle u b -&gt; ST s ()
</span><a href="#local-6989586621679170137"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span id="local-6989586621679170136"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170136"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679170135"><span class="annot"><span class="annottext">Bundle u b
</span><a href="#local-6989586621679170135"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bundle u b
</span><a href="#local-6989586621679170135"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Bundle u b -&gt; New v a -&gt; New v a
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679170134"><span class="annot"><span class="annottext">Mutable v s a
</span><a href="#local-6989586621679170134"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ST s (Mutable v s a)
forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170136"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Mutable v s a -&gt; Bundle u b -&gt; ST s ()
forall s. Mutable v s a -&gt; Bundle u b -&gt; ST s ()
</span><a href="#local-6989586621679170137"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Mutable v s a
</span><a href="#local-6989586621679170134"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Bundle u b
</span><a href="#local-6989586621679170135"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Mutable v s a -&gt; ST s (Mutable v s a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Mutable v s a
</span><a href="#local-6989586621679170134"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span id="local-6989586621679170132"><span id="local-6989586621679170133"><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-identifier hs-type">unstream</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170133"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170132"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#Bundle"><span class="hs-identifier hs-type">Bundle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170133"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170132"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170133"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170132"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-68"></span><span class="hs-pragma">{-# INLINE_FUSED unstream #-}</span><span>
</span><span id="line-69"></span><span id="unstream"><span class="annot"><span class="annottext">unstream :: Bundle v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-identifier hs-var hs-var">unstream</span></a></span></span><span> </span><span id="local-6989586621679170131"><span class="annot"><span class="annottext">Bundle v a
</span><a href="#local-6989586621679170131"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bundle v a
</span><a href="#local-6989586621679170131"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Bundle v a -&gt; New v a -&gt; New v a
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bundle v a -&gt; ST s (Mutable v (PrimState (ST s)) a)
forall (m :: * -&gt; *) (v :: * -&gt; *) a.
(PrimMonad m, Vector v a) =&gt;
Bundle v a -&gt; m (Mutable v (PrimState m) a)
</span><a href="Data.Vector.Generic.Mutable.html#vunstream"><span class="hs-identifier hs-var">MVector.vunstream</span></a></span><span> </span><span class="annot"><span class="annottext">Bundle v a
</span><a href="#local-6989586621679170131"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span id="local-6989586621679170128"><span id="local-6989586621679170129"><span class="annot"><a href="Data.Vector.Generic.New.html#transform"><span class="hs-identifier hs-type">transform</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170129"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170128"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679170240"><span class="annot"><a href="#local-6989586621679170240"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170240"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-identifier hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170240"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170128"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-identifier hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170240"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170128"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.Size.html#Size"><span class="hs-identifier hs-type">Size</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.Size.html#Size"><span class="hs-identifier hs-type">Size</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170129"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170128"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170129"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170128"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-74"></span><span class="hs-pragma">{-# INLINE_FUSED transform #-}</span><span>
</span><span id="line-75"></span><span id="transform"><span class="annot"><span class="annottext">transform :: (forall (m :: * -&gt; *). Monad m =&gt; Stream m a -&gt; Stream m a)
-&gt; (Size -&gt; Size) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#transform"><span class="hs-identifier hs-var hs-var">transform</span></a></span></span><span> </span><span id="local-6989586621679170127"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Monad m =&gt; Stream m a -&gt; Stream m a
</span><a href="#local-6989586621679170127"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Size -&gt; Size
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span id="local-6989586621679170126"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170126"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Stream (ST s) a -&gt; Stream (ST s) a)
-&gt; Mutable v (PrimState (ST s)) a
-&gt; ST s (Mutable v (PrimState (ST s)) a)
forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
(Stream m a -&gt; Stream m a)
-&gt; v (PrimState m) a -&gt; m (v (PrimState m) a)
</span><a href="Data.Vector.Generic.Mutable.html#transform"><span class="hs-identifier hs-var">MVector.transform</span></a></span><span> </span><span class="annot"><span class="annottext">Stream (ST s) a -&gt; Stream (ST s) a
forall (m :: * -&gt; *). Monad m =&gt; Stream m a -&gt; Stream m a
</span><a href="#local-6989586621679170127"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Mutable v s a -&gt; ST s (Mutable v s a))
-&gt; ST s (Mutable v s a) -&gt; ST s (Mutable v s a)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ST s (Mutable v s a)
forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170126"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span id="local-6989586621679170123"><span class="annot"><span class="hs-pragma">&quot;transform/transform [New]&quot;</span></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-pragma">forall</span><span> </span><span class="hs-pragma">(</span><span id="local-6989586621679170122"><span class="annot"><a href="#local-6989586621679170122"><span class="hs-pragma hs-var">f1</span></a></span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170121"><span class="annot"><a href="#local-6989586621679170121"><span class="hs-pragma hs-type">m</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170121"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170121"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170123"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170121"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170123"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-81"></span><span>         </span><span class="hs-pragma">(</span><span id="local-6989586621679170120"><span class="annot"><a href="#local-6989586621679170120"><span class="hs-pragma hs-var">f2</span></a></span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170119"><span class="annot"><a href="#local-6989586621679170119"><span class="hs-pragma hs-type">m</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170119"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170119"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170123"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170119"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170123"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-82"></span><span>         </span><span id="local-6989586621679170118"><span class="annot"><a href="#local-6989586621679170118"><span class="hs-pragma hs-var">g1</span></a></span></span><span> </span><span id="local-6989586621679170117"><span class="annot"><a href="#local-6989586621679170117"><span class="hs-pragma hs-var">g2</span></a></span></span><span> </span><span id="local-6989586621679170116"><span class="annot"><a href="#local-6989586621679170116"><span class="hs-pragma hs-var">p</span></a></span></span><span> </span><span class="hs-pragma">.</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#transform"><span class="hs-pragma hs-type">transform</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170122"><span class="hs-pragma hs-type">f1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170118"><span class="hs-pragma hs-type">g1</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#transform"><span class="hs-pragma hs-type">transform</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170120"><span class="hs-pragma hs-type">f2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170117"><span class="hs-pragma hs-type">g2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170116"><span class="hs-pragma hs-type">p</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#transform"><span class="hs-pragma hs-type">transform</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621679170122"><span class="hs-pragma hs-type">f1</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">.</span></span><span> </span><span class="annot"><a href="#local-6989586621679170120"><span class="hs-pragma hs-type">f2</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621679170118"><span class="hs-pragma hs-type">g1</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">.</span></span><span> </span><span class="annot"><a href="#local-6989586621679170117"><span class="hs-pragma hs-type">g2</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679170116"><span class="hs-pragma hs-type">p</span></a></span></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span id="local-6989586621679170114"><span class="annot"><span class="hs-pragma">&quot;transform/unstream [New]&quot;</span></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-pragma">forall</span><span> </span><span class="hs-pragma">(</span><span id="local-6989586621679170113"><span class="annot"><a href="#local-6989586621679170113"><span class="hs-pragma hs-var">f</span></a></span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170112"><span class="annot"><a href="#local-6989586621679170112"><span class="hs-pragma hs-type">m</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170112"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170112"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170114"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170112"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170114"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-87"></span><span>         </span><span id="local-6989586621679170111"><span class="annot"><a href="#local-6989586621679170111"><span class="hs-pragma hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679170110"><span class="annot"><a href="#local-6989586621679170110"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#transform"><span class="hs-pragma hs-type">transform</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170113"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170111"><span class="hs-pragma hs-type">g</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170110"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#inplace"><span class="hs-pragma hs-type">Bundle.inplace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170113"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170111"><span class="hs-pragma hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170110"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span></span><span>  </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span id="local-6989586621679170107"><span id="local-6989586621679170108"><span class="annot"><a href="Data.Vector.Generic.New.html#unstreamR"><span class="hs-identifier hs-type">unstreamR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170108"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170107"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#Bundle"><span class="hs-identifier hs-type">Bundle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170108"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170107"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170108"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170107"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-94"></span><span class="hs-pragma">{-# INLINE_FUSED unstreamR #-}</span><span>
</span><span id="line-95"></span><span id="unstreamR"><span class="annot"><span class="annottext">unstreamR :: Bundle v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#unstreamR"><span class="hs-identifier hs-var hs-var">unstreamR</span></a></span></span><span> </span><span id="local-6989586621679170106"><span class="annot"><span class="annottext">Bundle v a
</span><a href="#local-6989586621679170106"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bundle v a
</span><a href="#local-6989586621679170106"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Bundle v a -&gt; New v a -&gt; New v a
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bundle v a -&gt; ST s (Mutable v (PrimState (ST s)) a)
forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a (u :: * -&gt; *).
(PrimMonad m, MVector v a) =&gt;
Bundle u a -&gt; m (v (PrimState m) a)
</span><a href="Data.Vector.Generic.Mutable.html#unstreamR"><span class="hs-identifier hs-var">MVector.unstreamR</span></a></span><span> </span><span class="annot"><span class="annottext">Bundle v a
</span><a href="#local-6989586621679170106"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span id="local-6989586621679170103"><span id="local-6989586621679170104"><span class="annot"><a href="Data.Vector.Generic.New.html#transformR"><span class="hs-identifier hs-type">transformR</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170104"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679170220"><span class="annot"><a href="#local-6989586621679170220"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170220"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-identifier hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170220"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-identifier hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170220"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170103"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.Size.html#Size"><span class="hs-identifier hs-type">Size</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Bundle.Size.html#Size"><span class="hs-identifier hs-type">Size</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170104"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170104"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170103"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-100"></span><span class="hs-pragma">{-# INLINE_FUSED transformR #-}</span><span>
</span><span id="line-101"></span><span id="transformR"><span class="annot"><span class="annottext">transformR :: (forall (m :: * -&gt; *). Monad m =&gt; Stream m a -&gt; Stream m a)
-&gt; (Size -&gt; Size) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#transformR"><span class="hs-identifier hs-var hs-var">transformR</span></a></span></span><span> </span><span id="local-6989586621679170102"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Monad m =&gt; Stream m a -&gt; Stream m a
</span><a href="#local-6989586621679170102"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Size -&gt; Size
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span id="local-6989586621679170101"><span class="annot"><span class="annottext">forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170101"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. ST s (Mutable v s a)) -&gt; New v a
forall (v :: * -&gt; *) a. (forall s. ST s (Mutable v s a)) -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-var">New</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Stream (ST s) a -&gt; Stream (ST s) a)
-&gt; Mutable v (PrimState (ST s)) a
-&gt; ST s (Mutable v (PrimState (ST s)) a)
forall (m :: * -&gt; *) (v :: * -&gt; * -&gt; *) a.
(PrimMonad m, MVector v a) =&gt;
(Stream m a -&gt; Stream m a)
-&gt; v (PrimState m) a -&gt; m (v (PrimState m) a)
</span><a href="Data.Vector.Generic.Mutable.html#transformR"><span class="hs-identifier hs-var">MVector.transformR</span></a></span><span> </span><span class="annot"><span class="annottext">Stream (ST s) a -&gt; Stream (ST s) a
forall (m :: * -&gt; *). Monad m =&gt; Stream m a -&gt; Stream m a
</span><a href="#local-6989586621679170102"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Mutable v s a -&gt; ST s (Mutable v s a))
-&gt; ST s (Mutable v s a) -&gt; ST s (Mutable v s a)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ST s (Mutable v s a)
forall s. ST s (Mutable v s a)
</span><a href="#local-6989586621679170101"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621679170099"><span class="annot"><span class="hs-pragma">&quot;transformR/transformR [New]&quot;</span></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-pragma">forall</span><span> </span><span class="hs-pragma">(</span><span id="local-6989586621679170098"><span class="annot"><a href="#local-6989586621679170098"><span class="hs-pragma hs-var">f1</span></a></span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170097"><span class="annot"><a href="#local-6989586621679170097"><span class="hs-pragma hs-type">m</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170097"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170097"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170099"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170097"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170099"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-107"></span><span>         </span><span class="hs-pragma">(</span><span id="local-6989586621679170096"><span class="annot"><a href="#local-6989586621679170096"><span class="hs-pragma hs-var">f2</span></a></span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170095"><span class="annot"><a href="#local-6989586621679170095"><span class="hs-pragma hs-type">m</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170095"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170095"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170099"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170095"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170099"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-108"></span><span>         </span><span id="local-6989586621679170094"><span class="annot"><a href="#local-6989586621679170094"><span class="hs-pragma hs-var">g1</span></a></span></span><span> </span><span id="local-6989586621679170093"><span class="annot"><a href="#local-6989586621679170093"><span class="hs-pragma hs-var">g2</span></a></span></span><span>
</span><span id="line-109"></span><span>         </span><span id="local-6989586621679170092"><span class="annot"><a href="#local-6989586621679170092"><span class="hs-pragma hs-var">p</span></a></span></span><span> </span><span class="hs-pragma">.</span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#transformR"><span class="hs-pragma hs-type">transformR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170098"><span class="hs-pragma hs-type">f1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170094"><span class="hs-pragma hs-type">g1</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#transformR"><span class="hs-pragma hs-type">transformR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170096"><span class="hs-pragma hs-type">f2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170093"><span class="hs-pragma hs-type">g2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170092"><span class="hs-pragma hs-type">p</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#transformR"><span class="hs-pragma hs-type">transformR</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621679170098"><span class="hs-pragma hs-type">f1</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">.</span></span><span> </span><span class="annot"><a href="#local-6989586621679170096"><span class="hs-pragma hs-type">f2</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="#local-6989586621679170094"><span class="hs-pragma hs-type">g1</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">.</span></span><span> </span><span class="annot"><a href="#local-6989586621679170093"><span class="hs-pragma hs-type">g2</span></a></span><span class="hs-pragma">)</span><span> </span><span class="annot"><a href="#local-6989586621679170092"><span class="hs-pragma hs-type">p</span></a></span></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621679170091"><span class="annot"><span class="hs-pragma">&quot;transformR/unstreamR [New]&quot;</span></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-pragma">forall</span><span> </span><span class="hs-pragma">(</span><span id="local-6989586621679170090"><span class="annot"><a href="#local-6989586621679170090"><span class="hs-pragma hs-var">f</span></a></span></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170089"><span class="annot"><a href="#local-6989586621679170089"><span class="hs-pragma hs-type">m</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><span class="hs-pragma hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679170089"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="hs-pragma">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170089"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170091"><span class="hs-pragma hs-type">a</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Fusion.Stream.Monadic.html#Stream"><span class="hs-pragma hs-type">Stream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170089"><span class="hs-pragma hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170091"><span class="hs-pragma hs-type">a</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-114"></span><span>         </span><span id="local-6989586621679170088"><span class="annot"><a href="#local-6989586621679170088"><span class="hs-pragma hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679170087"><span class="annot"><a href="#local-6989586621679170087"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#transformR"><span class="hs-pragma hs-type">transformR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170090"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170088"><span class="hs-pragma hs-type">g</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstreamR"><span class="hs-pragma hs-type">unstreamR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170087"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstreamR"><span class="hs-pragma hs-type">unstreamR</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#inplace"><span class="hs-pragma hs-type">Bundle.inplace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170090"><span class="hs-pragma hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170088"><span class="hs-pragma hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170087"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span></span><span>  </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span id="local-6989586621679170085"><span id="local-6989586621679170086"><span class="annot"><a href="Data.Vector.Generic.New.html#slice"><span class="hs-identifier hs-type">slice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170086"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170085"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170086"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170085"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170086"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170085"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-120"></span><span class="hs-pragma">{-# INLINE_FUSED slice #-}</span><span>
</span><span id="line-121"></span><span id="slice"><span class="annot"><span class="annottext">slice :: Int -&gt; Int -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#slice"><span class="hs-identifier hs-var hs-var">slice</span></a></span></span><span> </span><span id="local-6989586621679170084"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170084"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679170083"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170083"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170082"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170082"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s.
MVector v a =&gt;
Int -&gt; Int -&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#slice"><span class="hs-identifier hs-var">MVector.slice</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170084"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170083"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170082"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span id="local-6989586621679170079"><span id="local-6989586621679170080"><span class="annot"><a href="Data.Vector.Generic.New.html#init"><span class="hs-identifier hs-type">init</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170080"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170079"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170080"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170079"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170080"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170079"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-124"></span><span class="hs-pragma">{-# INLINE_FUSED init #-}</span><span>
</span><span id="line-125"></span><span id="init"><span class="annot"><span class="annottext">init :: New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#init"><span class="hs-identifier hs-var hs-var">init</span></a></span></span><span> </span><span id="local-6989586621679170078"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170078"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s. MVector v a =&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#init"><span class="hs-identifier hs-var">MVector.init</span></a></span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170078"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span id="local-6989586621679170075"><span id="local-6989586621679170076"><span class="annot"><a href="Data.Vector.Generic.New.html#tail"><span class="hs-identifier hs-type">tail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170075"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170075"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170075"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-128"></span><span class="hs-pragma">{-# INLINE_FUSED tail #-}</span><span>
</span><span id="line-129"></span><span id="tail"><span class="annot"><span class="annottext">tail :: New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#tail"><span class="hs-identifier hs-var hs-var">tail</span></a></span></span><span> </span><span id="local-6989586621679170074"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170074"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s. MVector v a =&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#tail"><span class="hs-identifier hs-var">MVector.tail</span></a></span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170074"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="local-6989586621679170071"><span id="local-6989586621679170072"><span class="annot"><a href="Data.Vector.Generic.New.html#take"><span class="hs-identifier hs-type">take</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170072"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170071"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170072"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170071"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170072"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170071"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-132"></span><span class="hs-pragma">{-# INLINE_FUSED take #-}</span><span>
</span><span id="line-133"></span><span id="take"><span class="annot"><span class="annottext">take :: Int -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#take"><span class="hs-identifier hs-var hs-var">take</span></a></span></span><span> </span><span id="local-6989586621679170070"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170070"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170069"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170069"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s. MVector v a =&gt; Int -&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#take"><span class="hs-identifier hs-var">MVector.take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170070"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170069"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span id="local-6989586621679170066"><span id="local-6989586621679170067"><span class="annot"><a href="Data.Vector.Generic.New.html#drop"><span class="hs-identifier hs-type">drop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170067"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170066"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170067"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170066"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170067"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170066"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-136"></span><span class="hs-pragma">{-# INLINE_FUSED drop #-}</span><span>
</span><span id="line-137"></span><span id="drop"><span class="annot"><span class="annottext">drop :: Int -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#drop"><span class="hs-identifier hs-var hs-var">drop</span></a></span></span><span> </span><span id="local-6989586621679170065"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170065"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170064"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170064"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s. MVector v a =&gt; Int -&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#drop"><span class="hs-identifier hs-var">MVector.drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170065"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170064"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span id="local-6989586621679170061"><span id="local-6989586621679170062"><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeSlice"><span class="hs-identifier hs-type">unsafeSlice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170062"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170061"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170062"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170061"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170062"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170061"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-140"></span><span class="hs-pragma">{-# INLINE_FUSED unsafeSlice #-}</span><span>
</span><span id="line-141"></span><span id="unsafeSlice"><span class="annot"><span class="annottext">unsafeSlice :: Int -&gt; Int -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#unsafeSlice"><span class="hs-identifier hs-var hs-var">unsafeSlice</span></a></span></span><span> </span><span id="local-6989586621679170060"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170060"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679170059"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170059"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170058"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170058"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s.
MVector v a =&gt;
Int -&gt; Int -&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#unsafeSlice"><span class="hs-identifier hs-var">MVector.unsafeSlice</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170060"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679170059"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170058"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span id="local-6989586621679170055"><span id="local-6989586621679170056"><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeInit"><span class="hs-identifier hs-type">unsafeInit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170056"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170055"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170056"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170055"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170056"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170055"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-144"></span><span class="hs-pragma">{-# INLINE_FUSED unsafeInit #-}</span><span>
</span><span id="line-145"></span><span id="unsafeInit"><span class="annot"><span class="annottext">unsafeInit :: New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#unsafeInit"><span class="hs-identifier hs-var hs-var">unsafeInit</span></a></span></span><span> </span><span id="local-6989586621679170054"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170054"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s. MVector v a =&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#unsafeInit"><span class="hs-identifier hs-var">MVector.unsafeInit</span></a></span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170054"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621679170051"><span id="local-6989586621679170052"><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeTail"><span class="hs-identifier hs-type">unsafeTail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Vector.Generic.Base.html#Vector"><span class="hs-identifier hs-type">Vector</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170052"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170051"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170052"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170051"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#New"><span class="hs-identifier hs-type">New</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170052"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170051"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-148"></span><span class="hs-pragma">{-# INLINE_FUSED unsafeTail #-}</span><span>
</span><span id="line-149"></span><span id="unsafeTail"><span class="annot"><span class="annottext">unsafeTail :: New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#unsafeTail"><span class="hs-identifier hs-var hs-var">unsafeTail</span></a></span></span><span> </span><span id="local-6989586621679170050"><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170050"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
forall (v :: * -&gt; *) a.
(forall s. Mutable v s a -&gt; Mutable v s a) -&gt; New v a -&gt; New v a
</span><a href="Data.Vector.Generic.New.html#apply"><span class="hs-identifier hs-var">apply</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. Mutable v s a -&gt; Mutable v s a
forall (v :: * -&gt; * -&gt; *) a s. MVector v a =&gt; v s a -&gt; v s a
</span><a href="Data.Vector.Generic.Mutable.html#unsafeTail"><span class="hs-identifier hs-var">MVector.unsafeTail</span></a></span><span> </span><span class="annot"><span class="annottext">New v a
</span><a href="#local-6989586621679170050"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="annot"><span class="hs-pragma">&quot;slice/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170048"><span class="annot"><a href="#local-6989586621679170048"><span class="hs-pragma hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679170047"><span class="annot"><a href="#local-6989586621679170047"><span class="hs-pragma hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170046"><span class="annot"><a href="#local-6989586621679170046"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#slice"><span class="hs-pragma hs-type">slice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170048"><span class="hs-pragma hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170047"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170046"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#slice"><span class="hs-pragma hs-type">Bundle.slice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170048"><span class="hs-pragma hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170047"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170046"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="annot"><span class="hs-pragma">&quot;init/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170044"><span class="annot"><a href="#local-6989586621679170044"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#init"><span class="hs-pragma hs-type">init</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170044"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#init"><span class="hs-pragma hs-type">Bundle.init</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170044"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="annot"><span class="hs-pragma">&quot;tail/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170042"><span class="annot"><a href="#local-6989586621679170042"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#tail"><span class="hs-pragma hs-type">tail</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170042"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#tail"><span class="hs-pragma hs-type">Bundle.tail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170042"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="annot"><span class="hs-pragma">&quot;take/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170040"><span class="annot"><a href="#local-6989586621679170040"><span class="hs-pragma hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170039"><span class="annot"><a href="#local-6989586621679170039"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#take"><span class="hs-pragma hs-type">take</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170040"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170039"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#take"><span class="hs-pragma hs-type">Bundle.take</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170040"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170039"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="annot"><span class="hs-pragma">&quot;drop/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170037"><span class="annot"><a href="#local-6989586621679170037"><span class="hs-pragma hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170036"><span class="annot"><a href="#local-6989586621679170036"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#drop"><span class="hs-pragma hs-type">drop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170037"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170036"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#drop"><span class="hs-pragma hs-type">Bundle.drop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170037"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170036"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="annot"><span class="hs-pragma">&quot;unsafeSlice/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170034"><span class="annot"><a href="#local-6989586621679170034"><span class="hs-pragma hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679170033"><span class="annot"><a href="#local-6989586621679170033"><span class="hs-pragma hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679170032"><span class="annot"><a href="#local-6989586621679170032"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeSlice"><span class="hs-pragma hs-type">unsafeSlice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170034"><span class="hs-pragma hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170033"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170032"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#slice"><span class="hs-pragma hs-type">Bundle.slice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170034"><span class="hs-pragma hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170033"><span class="hs-pragma hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170032"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="annot"><span class="hs-pragma">&quot;unsafeInit/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170031"><span class="annot"><a href="#local-6989586621679170031"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeInit"><span class="hs-pragma hs-type">unsafeInit</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170031"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#init"><span class="hs-pragma hs-type">Bundle.init</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170031"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><span class="hs-pragma">&quot;unsafeTail/unstream [New]&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621679170030"><span class="annot"><a href="#local-6989586621679170030"><span class="hs-pragma hs-var">s</span></a></span></span><span class="hs-pragma">.</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="Data.Vector.Generic.New.html#unsafeTail"><span class="hs-pragma hs-type">unsafeTail</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170030"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="Data.Vector.Generic.New.html#unstream"><span class="hs-pragma hs-type">unstream</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Data.Vector.Fusion.Bundle.html#tail"><span class="hs-pragma hs-type">Bundle.tail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679170030"><span class="hs-pragma hs-type">s</span></a></span><span class="hs-pragma">)</span><span>   </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span></pre></body></html>