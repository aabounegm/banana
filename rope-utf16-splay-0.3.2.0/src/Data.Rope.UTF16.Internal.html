<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# language BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# language GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# language MultiParamTypeClasses #-}</span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Rope.UTF16.Internal</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Foldable</span></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Semigroup</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Lazy</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Unsafe</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Unsafe</span></span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.Position.html"><span class="hs-identifier">Data.Rope.UTF16.Internal.Position</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.Text.html"><span class="hs-identifier">Data.Rope.UTF16.Internal.Text</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.SplayTree.html"><span class="hs-identifier">Data.SplayTree</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Data.SplayTree.html#SplayTree"><span class="hs-identifier">SplayTree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.SplayTree.html#measure"><span class="hs-identifier">measure</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.SplayTree.html"><span class="hs-identifier">Data.SplayTree</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SplayTree</span></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">data</span><span> </span><span id="Chunk"><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-var">Chunk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Chunk"><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-var">Chunk</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="chunkText"><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span id="chunkMeasure"><span class="annot"><span class="annottext">Chunk -&gt; Position
</span><a href="Data.Rope.UTF16.Internal.html#chunkMeasure"><span class="hs-identifier hs-var hs-var">chunkMeasure</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Data.Rope.UTF16.Internal.Position.html#Position"><span class="hs-identifier hs-type">Position</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679041333"><span id="local-6989586621679041336"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-24"></span><span>  </span><span id="local-6989586621679041331"><span class="annot"><span class="annottext">show :: Chunk -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679041329"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041329"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Position
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041329"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679041324"><span id="local-6989586621679041326"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679041322"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041322"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621679041321"><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041321"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621679041320"><span class="annot"><span class="annottext">&lt;&gt; :: Chunk -&gt; Chunk -&gt; Chunk
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679041319"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041319"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span id="local-6989586621679041318"><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041318"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Position -&gt; Chunk
</span><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-var">Chunk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041322"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041319"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041321"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">Position -&gt; Position -&gt; Position
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041318"><span class="hs-identifier hs-var">m2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#chunk"><span class="hs-identifier hs-type">chunk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span>
</span><span id="line-30"></span><span id="chunk"><span class="annot"><span class="annottext">chunk :: Text -&gt; Chunk
</span><a href="Data.Rope.UTF16.Internal.html#chunk"><span class="hs-identifier hs-var hs-var">chunk</span></a></span></span><span> </span><span id="local-6989586621679041316"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041316"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Position -&gt; Chunk
</span><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-var">Chunk</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041316"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(Position -&gt; Chunk) -&gt; Position -&gt; Chunk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; RowColumn -&gt; Position
</span><a href="Data.Rope.UTF16.Internal.Position.html#Position"><span class="hs-identifier hs-var">Position</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041314"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">(RowColumn -&gt; Position) -&gt; RowColumn -&gt; Position
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; RowColumn -&gt; RowColumn
</span><a href="#local-6989586621679041313"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(RowColumn -&gt; RowColumn) -&gt; RowColumn -&gt; RowColumn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>    </span><span id="local-6989586621679041314"><span class="annot"><span class="annottext">len :: Int
</span><a href="#local-6989586621679041314"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">Unsafe.lengthWord16</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041316"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span id="local-6989586621679041313"><span class="annot"><span class="annottext">go :: Int -&gt; RowColumn -&gt; RowColumn
</span><a href="#local-6989586621679041313"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679041310"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041310"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679041309"><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041309"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-34"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041310"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041314"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041309"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-35"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int -&gt; Iter
</span><span class="hs-identifier hs-var">Unsafe.iter</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041316"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041310"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Unsafe.Iter</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span> </span><span id="local-6989586621679041306"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041306"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; RowColumn -&gt; RowColumn
</span><a href="#local-6989586621679041313"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041310"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041306"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041309"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; RowColumn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Unsafe.Iter</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679041304"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041304"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; RowColumn -&gt; RowColumn
</span><a href="#local-6989586621679041313"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041310"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041304"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041309"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; RowColumn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041304"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Data.SplayTree.html#Measured"><span class="hs-identifier hs-type">SplayTree.Measured</span></a></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.Position.html#Position"><span class="hs-identifier hs-type">Position</span></a></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-40"></span><span>  </span><span id="local-6989586621679041300"><span class="annot"><span class="annottext">measure :: Chunk -&gt; Position
</span><a href="#local-6989586621679041300"><span class="hs-identifier hs-var hs-var hs-var hs-var">measure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679041299"><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041299"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041299"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-comment">-- | A 'SplayTree' of 'Text' values optimised for being indexed by and</span><span>
</span><span id="line-43"></span><span class="hs-comment">-- modified at UTF-16 code units and row/column ('RowColumn') positions.</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- Internal invariant: No empty 'Chunk's in the 'SplayTree'</span><span>
</span><span id="line-45"></span><span class="hs-keyword">newtype</span><span> </span><span id="Rope"><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Rope"><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unrope"><span class="annot"><span class="annottext">Rope -&gt; SplayTree Position Chunk
</span><a href="Data.Rope.UTF16.Internal.html#unrope"><span class="hs-identifier hs-var hs-var">unrope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.SplayTree.html#SplayTree"><span class="hs-identifier hs-type">SplayTree</span></a></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.Position.html#Position"><span class="hs-identifier hs-type">Position</span></a></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679041294"><span class="annot"><a href="Data.SplayTree.html#Measured"><span class="hs-identifier hs-type">SplayTree.Measured</span></a></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.Position.html#Position"><span class="hs-identifier hs-type">Position</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041288"><span id="local-6989586621679041290"><span id="local-6989586621679041292"><span class="annot"><span class="annottext">Int -&gt; Rope -&gt; ShowS
[Rope] -&gt; ShowS
Rope -&gt; String
(Int -&gt; Rope -&gt; ShowS)
-&gt; (Rope -&gt; String) -&gt; ([Rope] -&gt; ShowS) -&gt; Show Rope
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Rope] -&gt; ShowS
$cshowList :: [Rope] -&gt; ShowS
show :: Rope -&gt; String
$cshow :: Rope -&gt; String
showsPrec :: Int -&gt; Rope -&gt; ShowS
$cshowsPrec :: Int -&gt; Rope -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">-- | The maximum length, in code units, of a chunk</span><span>
</span><span id="line-49"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#chunkLength"><span class="hs-identifier hs-type">chunkLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-50"></span><span id="chunkLength"><span class="annot"><span class="annottext">chunkLength :: Int
</span><a href="Data.Rope.UTF16.Internal.html#chunkLength"><span class="hs-identifier hs-var hs-var">chunkLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1000</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-comment">-- | Append joins adjacent chunks if that can be done while staying below</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- 'chunkLength'.</span><span>
</span><span id="line-54"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679041282"><span id="local-6989586621679041284"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041281"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041281"><span class="hs-identifier hs-var">r1</span></a></span></span><span> </span><span id="local-6989586621679041280"><span class="annot"><span class="annottext">&lt;&gt; :: Rope -&gt; Rope -&gt; Rope
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041279"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041279"><span class="hs-identifier hs-var">r2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Maybe (SplayTree Position Chunk, Chunk)
forall v a.
Measured v a =&gt;
SplayTree v a -&gt; Maybe (SplayTree v a, a)
</span><a href="Data.SplayTree.html#unsnoc"><span class="hs-identifier hs-var">SplayTree.unsnoc</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041281"><span class="hs-identifier hs-var">r1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Maybe (Chunk, SplayTree Position Chunk)
forall v a.
Measured v a =&gt;
SplayTree v a -&gt; Maybe (a, SplayTree v a)
</span><a href="Data.SplayTree.html#uncons"><span class="hs-identifier hs-var">SplayTree.uncons</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041279"><span class="hs-identifier hs-var">r2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (SplayTree Position Chunk, Chunk)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Chunk, SplayTree Position Chunk)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041279"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (SplayTree Position Chunk, Chunk)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Chunk, SplayTree Position Chunk)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041281"><span class="hs-identifier hs-var">r1</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679041276"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041276"><span class="hs-identifier hs-var">r1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041275"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041275"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679041274"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041274"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041273"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041273"><span class="hs-identifier hs-var">r2'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chunk -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041275"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chunk -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041274"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.Rope.UTF16.Internal.html#chunkLength"><span class="hs-identifier hs-var">chunkLength</span></a></span><span>
</span><span id="line-60"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">(SplayTree Position Chunk -&gt; Rope)
-&gt; SplayTree Position Chunk -&gt; Rope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041276"><span class="hs-identifier hs-var">r1'</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
-&gt; SplayTree Position Chunk -&gt; SplayTree Position Chunk
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041275"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Chunk -&gt; Chunk
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041274"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; SplayTree Position Chunk -&gt; SplayTree Position Chunk
forall v a. Measured v a =&gt; a -&gt; SplayTree v a -&gt; SplayTree v a
</span><a href="Data.SplayTree.html#%3C%7C"><span class="hs-operator hs-var">SplayTree.&lt;|</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041273"><span class="hs-identifier hs-var">r2'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">(SplayTree Position Chunk -&gt; Rope)
-&gt; SplayTree Position Chunk -&gt; Rope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041276"><span class="hs-identifier hs-var">r1'</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
-&gt; SplayTree Position Chunk -&gt; SplayTree Position Chunk
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041275"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; SplayTree Position Chunk -&gt; SplayTree Position Chunk
forall v a. Measured v a =&gt; a -&gt; SplayTree v a -&gt; SplayTree v a
</span><a href="Data.SplayTree.html#%3C%7C"><span class="hs-operator hs-var">SplayTree.&lt;|</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041274"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; SplayTree Position Chunk -&gt; SplayTree Position Chunk
forall v a. Measured v a =&gt; a -&gt; SplayTree v a -&gt; SplayTree v a
</span><a href="Data.SplayTree.html#%3C%7C"><span class="hs-operator hs-var">SplayTree.&lt;|</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041273"><span class="hs-identifier hs-var">r2'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679041265"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621679041263"><span class="annot"><span class="annottext">mempty :: Rope
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-66"></span><span>  </span><span id="local-6989586621679041262"><span class="annot"><span class="annottext">mappend :: Rope -&gt; Rope -&gt; Rope
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Rope -&gt; Rope
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679041259"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621679041257"><span class="annot"><span class="annottext">== :: Rope -&gt; Rope -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(==)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text -&gt; Bool) -&gt; (Rope -&gt; Text) -&gt; Rope -&gt; Rope -&gt; Bool
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#toText"><span class="hs-identifier hs-var">toText</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679041241"><span id="local-6989586621679041243"><span id="local-6989586621679041245"><span id="local-6989586621679041247"><span id="local-6989586621679041249"><span id="local-6989586621679041251"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-72"></span><span>  </span><span id="local-6989586621679041239"><span class="annot"><span class="annottext">compare :: Rope -&gt; Rope -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text -&gt; Ordering)
-&gt; (Rope -&gt; Text) -&gt; Rope -&gt; Rope -&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#toText"><span class="hs-identifier hs-var">toText</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679041235"><span class="annot"><span class="annottext">fromString :: String -&gt; Rope
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#fromText"><span class="hs-identifier hs-var">fromText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Rope) -&gt; (String -&gt; Text) -&gt; String -&gt; Rope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- * Queries</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-comment">-- | Is the rope empty?</span><span>
</span><span id="line-81"></span><span class="hs-comment">--</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- @since 0.2.0.0</span><span>
</span><span id="line-83"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#null"><span class="hs-pragma hs-type">null</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-84"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-85"></span><span id="null"><span class="annot"><span class="annottext">null :: Rope -&gt; Bool
</span><a href="Data.Rope.UTF16.Internal.html#null"><span class="hs-identifier hs-var hs-var">null</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041230"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041230"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Bool
forall v a. SplayTree v a -&gt; Bool
</span><a href="Data.SplayTree.html#null"><span class="hs-identifier hs-var">SplayTree.null</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041230"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">-- | Length in code units (not characters)</span><span>
</span><span id="line-88"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#length"><span class="hs-identifier hs-type">length</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-89"></span><span id="length"><span class="annot"><span class="annottext">length :: Rope -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.html#length"><span class="hs-identifier hs-var hs-var">length</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span> </span><span class="annot"><span class="annottext">(Position -&gt; Int) -&gt; (Rope -&gt; Position) -&gt; Rope -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-comment">-- | The number of newlines in the rope</span><span>
</span><span id="line-92"></span><span class="hs-comment">--</span><span>
</span><span id="line-93"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-94"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#rows"><span class="hs-identifier hs-type">rows</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-95"></span><span id="rows"><span class="annot"><span class="annottext">rows :: Rope -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.html#rows"><span class="hs-identifier hs-var hs-var">rows</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041226"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041226"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#row"><span class="hs-identifier hs-var hs-var">row</span></a></span><span> </span><span class="annot"><span class="annottext">(RowColumn -&gt; Int) -&gt; RowColumn -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Position -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#rowColumn"><span class="hs-identifier hs-var hs-var">rowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">(Position -&gt; RowColumn) -&gt; Position -&gt; RowColumn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041226"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">-- | The number of code units (not characters) since the last newline or the</span><span>
</span><span id="line-98"></span><span class="hs-comment">-- start of the rope</span><span>
</span><span id="line-99"></span><span class="hs-comment">--</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-101"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#columns"><span class="hs-identifier hs-type">columns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-102"></span><span id="columns"><span class="annot"><span class="annottext">columns :: Rope -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.html#columns"><span class="hs-identifier hs-var hs-var">columns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041222"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041222"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#column"><span class="hs-identifier hs-var hs-var">column</span></a></span><span> </span><span class="annot"><span class="annottext">(RowColumn -&gt; Int) -&gt; RowColumn -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Position -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#rowColumn"><span class="hs-identifier hs-var hs-var">rowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">(Position -&gt; RowColumn) -&gt; Position -&gt; RowColumn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041222"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- * Conversions</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#toText"><span class="hs-identifier hs-type">toText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-108"></span><span id="toText"><span class="annot"><span class="annottext">toText :: Rope -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#toText"><span class="hs-identifier hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">Text.concat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; (Rope -&gt; [Text]) -&gt; Rope -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; [Text]
</span><a href="Data.Rope.UTF16.Internal.html#toChunks"><span class="hs-identifier hs-var">toChunks</span></a></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#toLazyText"><span class="hs-identifier hs-type">toLazyText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lazy.Text</span></span><span>
</span><span id="line-111"></span><span id="toLazyText"><span class="annot"><span class="annottext">toLazyText :: Rope -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#toLazyText"><span class="hs-identifier hs-var hs-var">toLazyText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">Lazy.fromChunks</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; (Rope -&gt; [Text]) -&gt; Rope -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; [Text]
</span><a href="Data.Rope.UTF16.Internal.html#toChunks"><span class="hs-identifier hs-var">toChunks</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#fromText"><span class="hs-identifier hs-type">fromText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-114"></span><span id="fromText"><span class="annot"><span class="annottext">fromText :: Text -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#fromText"><span class="hs-identifier hs-var hs-var">fromText</span></a></span></span><span> </span><span id="local-6989586621679041216"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041216"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">Text.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041216"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rope
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">(SplayTree Position Chunk -&gt; Rope)
-&gt; SplayTree Position Chunk -&gt; Rope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Text] -&gt; SplayTree Position Chunk
</span><a href="#local-6989586621679041214"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041213"><span class="hs-identifier hs-var">numChunks</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041212"><span class="hs-identifier hs-var">chunks</span></a></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-118"></span><span>    </span><span id="local-6989586621679041212"><span class="annot"><span class="annottext">chunks :: [Text]
</span><a href="#local-6989586621679041212"><span class="hs-identifier hs-var hs-var">chunks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; [Text]
</span><a href="Data.Rope.UTF16.Internal.Text.html#chunks16Of"><span class="hs-identifier hs-var">chunks16Of</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="Data.Rope.UTF16.Internal.html#chunkLength"><span class="hs-identifier hs-var">chunkLength</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041216"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span id="local-6989586621679041213"><span class="annot"><span class="annottext">numChunks :: Int
</span><a href="#local-6989586621679041213"><span class="hs-identifier hs-var hs-var">numChunks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">Prelude.length</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041212"><span class="hs-identifier hs-var">chunks</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span id="local-6989586621679041214"><span class="annot"><span class="annottext">go :: Int -&gt; [Text] -&gt; SplayTree Position Chunk
</span><a href="#local-6989586621679041214"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><a href="#local-6989586621679041214"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679041209"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041209"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621679041208"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041208"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
-&gt; Chunk -&gt; SplayTree Position Chunk -&gt; SplayTree Position Chunk
forall v a.
Measured v a =&gt;
SplayTree v a -&gt; a -&gt; SplayTree v a -&gt; SplayTree v a
</span><a href="Data.SplayTree.html#fork"><span class="hs-identifier hs-var">SplayTree.fork</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Text] -&gt; SplayTree Position Chunk
</span><a href="#local-6989586621679041214"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041206"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041205"><span class="hs-identifier hs-var">pre</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Chunk
</span><a href="Data.Rope.UTF16.Internal.html#chunk"><span class="hs-identifier hs-var">chunk</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041204"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Text] -&gt; SplayTree Position Chunk
</span><a href="#local-6989586621679041214"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041209"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041206"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041203"><span class="hs-identifier hs-var">post</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679041205"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041205"><span class="hs-identifier hs-var">pre</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041204"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041204"><span class="hs-identifier hs-var">c</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679041203"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041203"><span class="hs-identifier hs-var">post</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Text] -&gt; ([Text], [Text])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">Prelude.splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041206"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679041208"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span id="local-6989586621679041206"><span class="annot"><span class="annottext">mid :: Int
</span><a href="#local-6989586621679041206"><span class="hs-identifier hs-var hs-var">mid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041209"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`div`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#fromShortText"><span class="hs-identifier hs-type">fromShortText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-127"></span><span id="fromShortText"><span class="annot"><span class="annottext">fromShortText :: Text -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#fromShortText"><span class="hs-identifier hs-var hs-var">fromShortText</span></a></span></span><span> </span><span id="local-6989586621679041199"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041199"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">Text.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041199"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rope
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">(SplayTree Position Chunk -&gt; Rope)
-&gt; SplayTree Position Chunk -&gt; Rope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; SplayTree Position Chunk
forall v a. Measured v a =&gt; a -&gt; SplayTree v a
</span><a href="Data.SplayTree.html#singleton"><span class="hs-identifier hs-var">SplayTree.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">(Chunk -&gt; SplayTree Position Chunk)
-&gt; Chunk -&gt; SplayTree Position Chunk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Chunk
</span><a href="Data.Rope.UTF16.Internal.html#chunk"><span class="hs-identifier hs-var">chunk</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041199"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#toString"><span class="hs-identifier hs-type">toString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-132"></span><span id="toString"><span class="annot"><span class="annottext">toString :: Rope -&gt; String
</span><a href="Data.Rope.UTF16.Internal.html#toString"><span class="hs-identifier hs-var hs-var">toString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String) -&gt; [Text] -&gt; String
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">Foldable.concatMap</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">Text.unpack</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; String) -&gt; (Rope -&gt; [Text]) -&gt; Rope -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; [Text]
</span><a href="Data.Rope.UTF16.Internal.html#toChunks"><span class="hs-identifier hs-var">toChunks</span></a></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- * Transformations</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | Map over the characters of a rope</span><span>
</span><span id="line-138"></span><span class="hs-comment">--</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-140"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#map"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-141"></span><span id="map"><span class="annot"><span class="annottext">map :: (Char -&gt; Char) -&gt; Rope -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#map"><span class="hs-identifier hs-var hs-var">map</span></a></span></span><span> </span><span id="local-6989586621679041193"><span class="annot"><span class="annottext">Char -&gt; Char
</span><a href="#local-6989586621679041193"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041192"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041192"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">(SplayTree Position Chunk -&gt; Rope)
-&gt; SplayTree Position Chunk -&gt; Rope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Chunk -&gt; Chunk)
-&gt; SplayTree Position Chunk -&gt; SplayTree Position Chunk
forall v a w b.
(Measured v a, Measured w b) =&gt;
(a -&gt; b) -&gt; SplayTree v a -&gt; SplayTree w b
</span><a href="Data.SplayTree.html#map"><span class="hs-identifier hs-var">SplayTree.map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Chunk
</span><a href="Data.Rope.UTF16.Internal.html#chunk"><span class="hs-identifier hs-var">chunk</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Chunk) -&gt; (Chunk -&gt; Text) -&gt; Chunk -&gt; Chunk
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.map</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><a href="#local-6989586621679041193"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text) -&gt; (Chunk -&gt; Text) -&gt; Chunk -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041192"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-comment">-- | Concatenate the interspersion of a rope between the elements of a list of ropes</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-146"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#intercalate"><span class="hs-identifier hs-type">intercalate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-147"></span><span id="intercalate"><span class="annot"><span class="annottext">intercalate :: Rope -&gt; [Rope] -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#intercalate"><span class="hs-identifier hs-var hs-var">intercalate</span></a></span></span><span> </span><span id="local-6989586621679041188"><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041188"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679041187"><span class="annot"><span class="annottext">[Rope]
</span><a href="#local-6989586621679041187"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Rope] -&gt; Rope
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Rope] -&gt; Rope) -&gt; [Rope] -&gt; Rope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; [Rope] -&gt; [Rope]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">intersperse</span></span><span> </span><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041188"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[Rope]
</span><a href="#local-6989586621679041187"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-150"></span><span class="hs-comment">-- * Chunking</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | The raw 'Text' data that the 'Rope' is built from</span><span>
</span><span id="line-153"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#toChunks"><span class="hs-identifier hs-type">toChunks</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-154"></span><span id="toChunks"><span class="annot"><span class="annottext">toChunks :: Rope -&gt; [Text]
</span><a href="Data.Rope.UTF16.Internal.html#toChunks"><span class="hs-identifier hs-var hs-var">toChunks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Chunk -&gt; Text) -&gt; [Chunk] -&gt; [Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span> </span><span class="annot"><span class="annottext">([Chunk] -&gt; [Text]) -&gt; (Rope -&gt; [Chunk]) -&gt; Rope -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; [Chunk]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(SplayTree Position Chunk -&gt; [Chunk])
-&gt; (Rope -&gt; SplayTree Position Chunk) -&gt; Rope -&gt; [Chunk]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; SplayTree Position Chunk
</span><a href="Data.Rope.UTF16.Internal.html#unrope"><span class="hs-identifier hs-var hs-var">unrope</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | Get the first chunk and the rest of the 'Rope' if non-empty</span><span>
</span><span id="line-157"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#unconsChunk"><span class="hs-identifier hs-type">unconsChunk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span id="unconsChunk"><span class="annot"><span class="annottext">unconsChunk :: Rope -&gt; Maybe (Text, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#unconsChunk"><span class="hs-identifier hs-var hs-var">unconsChunk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041183"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041183"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Maybe (Chunk, SplayTree Position Chunk)
forall v a.
Measured v a =&gt;
SplayTree v a -&gt; Maybe (a, SplayTree v a)
</span><a href="Data.SplayTree.html#uncons"><span class="hs-identifier hs-var">SplayTree.uncons</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041183"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-159"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Chunk, SplayTree Position Chunk)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Text, Rope)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679041182"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041182"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Position
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041181"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041181"><span class="hs-identifier hs-var">r'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Text, Rope) -&gt; Maybe (Text, Rope)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041182"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041181"><span class="hs-identifier hs-var">r'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-comment">-- | Get the last chunk and the rest of the 'Rope' if non-empty</span><span>
</span><span id="line-163"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#unsnocChunk"><span class="hs-identifier hs-type">unsnocChunk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span id="unsnocChunk"><span class="annot"><span class="annottext">unsnocChunk :: Rope -&gt; Maybe (Rope, Text)
</span><a href="Data.Rope.UTF16.Internal.html#unsnocChunk"><span class="hs-identifier hs-var hs-var">unsnocChunk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041179"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041179"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Maybe (SplayTree Position Chunk, Chunk)
forall v a.
Measured v a =&gt;
SplayTree v a -&gt; Maybe (SplayTree v a, a)
</span><a href="Data.SplayTree.html#unsnoc"><span class="hs-identifier hs-var">SplayTree.unsnoc</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041179"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="annottext">Maybe (SplayTree Position Chunk, Chunk)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Rope, Text)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679041178"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041178"><span class="hs-identifier hs-var">r'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679041177"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041177"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Position
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Rope, Text) -&gt; Maybe (Rope, Text)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041178"><span class="hs-identifier hs-var">r'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041177"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- * UTF-16 code unit indexing</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">-- | Split the rope at the nth code unit (not character)</span><span>
</span><span id="line-172"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#splitAt"><span class="hs-identifier hs-type">splitAt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span id="splitAt"><span class="annot"><span class="annottext">splitAt :: Int -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#splitAt"><span class="hs-identifier hs-var hs-var">splitAt</span></a></span></span><span> </span><span id="local-6989586621679041175"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041175"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041174"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041174"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Position -&gt; Bool)
-&gt; SplayTree Position Chunk -&gt; SplitResult Position Chunk
forall v a.
Measured v a =&gt;
(v -&gt; Bool) -&gt; SplayTree v a -&gt; SplitResult v a
</span><a href="Data.SplayTree.html#split"><span class="hs-identifier hs-var">SplayTree.split</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041175"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Bool) -&gt; (Position -&gt; Int) -&gt; Position -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041174"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><span class="annottext">SplitResult Position Chunk
</span><a href="Data.SplayTree.html#Outside"><span class="hs-identifier hs-var">SplayTree.Outside</span></a></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041175"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rope
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041174"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041174"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rope
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="Data.SplayTree.html#Inside"><span class="hs-identifier hs-type">SplayTree.Inside</span></a></span><span> </span><span id="local-6989586621679041168"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041168"><span class="hs-identifier hs-var">pre</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679041167"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041167"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Position
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679041166"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041166"><span class="hs-identifier hs-var">post</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041168"><span class="hs-identifier hs-var">pre</span></a></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Rope -&gt; Rope
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#fromShortText"><span class="hs-identifier hs-var">fromShortText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041165"><span class="hs-identifier hs-var">pret</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#fromShortText"><span class="hs-identifier hs-var">fromShortText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041164"><span class="hs-identifier hs-var">postt</span></a></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Rope -&gt; Rope
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041166"><span class="hs-identifier hs-var">post</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>      </span><span id="local-6989586621679041163"><span class="annot"><span class="annottext">n' :: Int
</span><a href="#local-6989586621679041163"><span class="hs-identifier hs-var hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041175"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041168"><span class="hs-identifier hs-var">pre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679041165"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041165"><span class="hs-identifier hs-var">pret</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041164"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041164"><span class="hs-identifier hs-var">postt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; (Text, Text)
</span><a href="Data.Rope.UTF16.Internal.Text.html#split16At"><span class="hs-identifier hs-var">split16At</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041163"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041167"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-comment">-- | Take the first n code units (not characters)</span><span>
</span><span id="line-183"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#take"><span class="hs-identifier hs-type">take</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-184"></span><span id="take"><span class="annot"><span class="annottext">take :: Int -&gt; Rope -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#take"><span class="hs-identifier hs-var hs-var">take</span></a></span></span><span> </span><span id="local-6989586621679041160"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041160"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rope, Rope) -&gt; Rope
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Rope, Rope) -&gt; Rope) -&gt; (Rope -&gt; (Rope, Rope)) -&gt; Rope -&gt; Rope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#splitAt"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.splitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041160"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- | Drop the first n code units (not characters)</span><span>
</span><span id="line-187"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#drop"><span class="hs-identifier hs-type">drop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-188"></span><span id="drop"><span class="annot"><span class="annottext">drop :: Int -&gt; Rope -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#drop"><span class="hs-identifier hs-var hs-var">drop</span></a></span></span><span> </span><span id="local-6989586621679041158"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041158"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rope, Rope) -&gt; Rope
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Rope, Rope) -&gt; Rope) -&gt; (Rope -&gt; (Rope, Rope)) -&gt; Rope -&gt; Rope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#splitAt"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.splitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041158"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-comment">-- | Get the code unit index in the rope that corresponds to a 'RowColumn' position</span><span>
</span><span id="line-191"></span><span class="hs-comment">--</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- @since 0.2.0.0</span><span>
</span><span id="line-193"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#rowColumnCodeUnits"><span class="hs-identifier hs-type">rowColumnCodeUnits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-type">RowColumn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-194"></span><span id="rowColumnCodeUnits"><span class="annot"><span class="annottext">rowColumnCodeUnits :: RowColumn -&gt; Rope -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.html#rowColumnCodeUnits"><span class="hs-identifier hs-var hs-var">rowColumnCodeUnits</span></a></span></span><span> </span><span id="local-6989586621679041156"><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041156"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041155"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041155"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Position -&gt; Bool)
-&gt; SplayTree Position Chunk -&gt; SplitResult Position Chunk
forall v a.
Measured v a =&gt;
(v -&gt; Bool) -&gt; SplayTree v a -&gt; SplitResult v a
</span><a href="Data.SplayTree.html#split"><span class="hs-identifier hs-var">SplayTree.split</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041156"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RowColumn -&gt; Bool) -&gt; (Position -&gt; RowColumn) -&gt; Position -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Position -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#rowColumn"><span class="hs-identifier hs-var hs-var">rowColumn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041155"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><span class="annottext">SplitResult Position Chunk
</span><a href="Data.SplayTree.html#Outside"><span class="hs-identifier hs-var">SplayTree.Outside</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041156"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span> </span><span class="annot"><span class="annottext">(Position -&gt; Int) -&gt; Position -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041155"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="Data.SplayTree.html#Inside"><span class="hs-identifier hs-type">SplayTree.Inside</span></a></span><span> </span><span id="local-6989586621679041154"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041154"><span class="hs-identifier hs-var">pre</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Chunk"><span class="hs-identifier hs-type">Chunk</span></a></span><span> </span><span id="local-6989586621679041153"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041153"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Position
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; RowColumn -&gt; Int
</span><a href="#local-6989586621679041152"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(RowColumn -&gt; Int) -&gt; RowColumn -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Position -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#rowColumn"><span class="hs-identifier hs-var hs-var">rowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041151"><span class="hs-identifier hs-var">prePos</span></a></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-200"></span><span>      </span><span id="local-6989586621679041151"><span class="annot"><span class="annottext">prePos :: Position
</span><a href="#local-6989586621679041151"><span class="hs-identifier hs-var hs-var">prePos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">SplayTree.measure</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041154"><span class="hs-identifier hs-var">pre</span></a></span><span>
</span><span id="line-201"></span><span>      </span><span id="local-6989586621679041150"><span class="annot"><span class="annottext">len :: Int
</span><a href="#local-6989586621679041150"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">Unsafe.lengthWord16</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041153"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-202"></span><span>      </span><span id="local-6989586621679041152"><span class="annot"><span class="annottext">go :: Int -&gt; RowColumn -&gt; Int
</span><a href="#local-6989586621679041152"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679041149"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041149"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679041148"><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041148"><span class="hs-identifier hs-var">v'</span></a></span></span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041156"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041148"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041149"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041150"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span> </span><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041151"><span class="hs-identifier hs-var">prePos</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041149"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-204"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int -&gt; Iter
</span><span class="hs-identifier hs-var">Unsafe.iter</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041153"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041149"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-205"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Unsafe.Iter</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span> </span><span id="local-6989586621679041146"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041146"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; RowColumn -&gt; Int
</span><a href="#local-6989586621679041152"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041149"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041146"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041148"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; RowColumn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Unsafe.Iter</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041156"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041148"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; RowColumn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Position -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.Position.html#codeUnits"><span class="hs-identifier hs-var hs-var">codeUnits</span></a></span><span> </span><span class="annot"><span class="annottext">Position
</span><a href="#local-6989586621679041151"><span class="hs-identifier hs-var">prePos</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041149"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-207"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Unsafe.Iter</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679041145"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041145"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; RowColumn -&gt; Int
</span><a href="#local-6989586621679041152"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041149"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041145"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RowColumn
</span><a href="#local-6989586621679041148"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; RowColumn -&gt; RowColumn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041145"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- | Get the 'RowColumn' position that corresponds to a code unit</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- index in the rope</span><span>
</span><span id="line-211"></span><span class="hs-comment">--</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- @since 0.3.2.0</span><span>
</span><span id="line-213"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#codeUnitsRowColumn"><span class="hs-identifier hs-type">codeUnitsRowColumn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-type">RowColumn</span></a></span><span>
</span><span id="line-214"></span><span id="codeUnitsRowColumn"><span class="annot"><span class="annottext">codeUnitsRowColumn :: Int -&gt; Rope -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.html#codeUnitsRowColumn"><span class="hs-identifier hs-var hs-var">codeUnitsRowColumn</span></a></span></span><span> </span><span id="local-6989586621679041143"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041143"><span class="hs-identifier hs-var">offset</span></a></span></span><span> </span><span id="local-6989586621679041142"><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041142"><span class="hs-identifier hs-var">rope</span></a></span></span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Position -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#rowColumn"><span class="hs-identifier hs-var hs-var">rowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">(Position -&gt; RowColumn) -&gt; (Rope -&gt; Position) -&gt; Rope -&gt; RowColumn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Position
forall v a. Measured v a =&gt; a -&gt; v
</span><a href="Data.SplayTree.html#measure"><span class="hs-identifier hs-var">measure</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Rope -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#take"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041143"><span class="hs-identifier hs-var">offset</span></a></span><span> </span><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041142"><span class="hs-identifier hs-var">rope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- * Lines</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- | Split the rope immediately after the i:th newline</span><span>
</span><span id="line-221"></span><span class="hs-comment">--</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- @since 0.3.1.0</span><span>
</span><span id="line-223"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#splitAtLine"><span class="hs-identifier hs-type">splitAtLine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span id="splitAtLine"><span class="annot"><span class="annottext">splitAtLine :: Int -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#splitAtLine"><span class="hs-identifier hs-var hs-var">splitAtLine</span></a></span></span><span> </span><span id="local-6989586621679041140"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041140"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679041139"><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041139"><span class="hs-identifier hs-var">rope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#splitAt"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.splitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041138"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041139"><span class="hs-identifier hs-var">rope</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621679041138"><span class="annot"><span class="annottext">i :: Int
</span><a href="#local-6989586621679041138"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RowColumn -&gt; Rope -&gt; Int
</span><a href="Data.Rope.UTF16.Internal.html#rowColumnCodeUnits"><span class="hs-identifier hs-var">rowColumnCodeUnits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; RowColumn
</span><a href="Data.Rope.UTF16.Internal.Position.html#RowColumn"><span class="hs-identifier hs-var">RowColumn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679041140"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041139"><span class="hs-identifier hs-var">rope</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- * Breaking by predicate</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-comment">-- | @span f r = (takeWhile f r, dropWhile f r)@</span><span>
</span><span id="line-232"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#span"><span class="hs-identifier hs-type">span</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span id="span"><span class="annot"><span class="annottext">span :: (Char -&gt; Bool) -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#span"><span class="hs-identifier hs-var hs-var">span</span></a></span></span><span> </span><span id="local-6989586621679041136"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041136"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041135"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041135"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Maybe (Chunk, SplayTree Position Chunk)
forall v a.
Measured v a =&gt;
SplayTree v a -&gt; Maybe (a, SplayTree v a)
</span><a href="Data.SplayTree.html#uncons"><span class="hs-identifier hs-var">SplayTree.uncons</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041135"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Chunk, SplayTree Position Chunk)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rope
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rope
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679041134"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041134"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041133"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041133"><span class="hs-identifier hs-var">r'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">Text.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041132"><span class="hs-identifier hs-var">postt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Chunk -&gt; SplayTree Position Chunk
forall v a. Measured v a =&gt; a -&gt; SplayTree v a
</span><a href="Data.SplayTree.html#singleton"><span class="hs-identifier hs-var">SplayTree.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041134"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Rope -&gt; Rope
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041131"><span class="hs-identifier hs-var">pre'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041130"><span class="hs-identifier hs-var">post'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#fromShortText"><span class="hs-identifier hs-var">fromShortText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041129"><span class="hs-identifier hs-var">pret</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#fromShortText"><span class="hs-identifier hs-var">fromShortText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041132"><span class="hs-identifier hs-var">postt</span></a></span><span> </span><span class="annot"><span class="annottext">Rope -&gt; Rope -&gt; Rope
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041133"><span class="hs-identifier hs-var">r'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-239"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679041129"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041129"><span class="hs-identifier hs-var">pret</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041132"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679041132"><span class="hs-identifier hs-var">postt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">Text.span</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041136"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; (Text, Text)) -&gt; Text -&gt; (Text, Text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041134"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-240"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679041131"><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041131"><span class="hs-identifier hs-var">pre'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679041130"><span class="annot"><span class="annottext">Rope
</span><a href="#local-6989586621679041130"><span class="hs-identifier hs-var">post'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#span"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.span</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041136"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Rope -&gt; (Rope, Rope)) -&gt; Rope -&gt; (Rope, Rope)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041133"><span class="hs-identifier hs-var">r'</span></a></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-comment">-- | @break f = span (not . f)@</span><span>
</span><span id="line-243"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#break"><span class="hs-identifier hs-type">break</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span id="break"><span class="annot"><span class="annottext">break :: (Char -&gt; Bool) -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#break"><span class="hs-identifier hs-var hs-var">break</span></a></span></span><span> </span><span id="local-6989586621679041126"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041126"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#span"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (Char -&gt; Bool) -&gt; Char -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041126"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">-- | @takeWhile f = fst . span f@</span><span>
</span><span id="line-247"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#takeWhile"><span class="hs-identifier hs-type">takeWhile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-248"></span><span id="takeWhile"><span class="annot"><span class="annottext">takeWhile :: (Char -&gt; Bool) -&gt; Rope -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#takeWhile"><span class="hs-identifier hs-var hs-var">takeWhile</span></a></span></span><span> </span><span id="local-6989586621679041123"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041123"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rope, Rope) -&gt; Rope
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Rope, Rope) -&gt; Rope) -&gt; (Rope -&gt; (Rope, Rope)) -&gt; Rope -&gt; Rope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#span"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.span</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041123"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-comment">-- | @dropWhile f = snd . span f@</span><span>
</span><span id="line-251"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#dropWhile"><span class="hs-identifier hs-type">dropWhile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span>
</span><span id="line-252"></span><span id="dropWhile"><span class="annot"><span class="annottext">dropWhile :: (Char -&gt; Bool) -&gt; Rope -&gt; Rope
</span><a href="Data.Rope.UTF16.Internal.html#dropWhile"><span class="hs-identifier hs-var hs-var">dropWhile</span></a></span></span><span> </span><span id="local-6989586621679041121"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041121"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rope, Rope) -&gt; Rope
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Rope, Rope) -&gt; Rope) -&gt; (Rope -&gt; (Rope, Rope)) -&gt; Rope -&gt; Rope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Rope -&gt; (Rope, Rope)
</span><a href="Data.Rope.UTF16.Internal.html#span"><span class="hs-identifier hs-var">Data.Rope.UTF16.Internal.span</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041121"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- * Folds</span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">-- | Fold left</span><span>
</span><span id="line-258"></span><span class="hs-comment">--</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-260"></span><span id="local-6989586621679041120"><span class="annot"><a href="Data.Rope.UTF16.Internal.html#foldl"><span class="hs-identifier hs-type">foldl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679041120"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041120"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041120"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041120"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-261"></span><span id="foldl"><span class="annot"><span class="annottext">foldl :: (a -&gt; Char -&gt; a) -&gt; a -&gt; Rope -&gt; a
</span><a href="Data.Rope.UTF16.Internal.html#foldl"><span class="hs-identifier hs-var hs-var">foldl</span></a></span></span><span> </span><span id="local-6989586621679041118"><span class="annot"><span class="annottext">a -&gt; Char -&gt; a
</span><a href="#local-6989586621679041118"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679041117"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041117"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041116"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041116"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Chunk -&gt; a) -&gt; a -&gt; SplayTree Position Chunk -&gt; a
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">Foldable.foldl</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679041114"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041114"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679041113"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041113"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Char -&gt; a) -&gt; a -&gt; Text -&gt; a
forall a. (a -&gt; Char -&gt; a) -&gt; a -&gt; Text -&gt; a
</span><span class="hs-identifier hs-var">Text.foldl</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Char -&gt; a
</span><a href="#local-6989586621679041118"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041114"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; a) -&gt; Text -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041113"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041117"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041116"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-comment">-- | A strict version of 'foldl'</span><span>
</span><span id="line-264"></span><span class="hs-comment">--</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-266"></span><span id="local-6989586621679041111"><span class="annot"><a href="Data.Rope.UTF16.Internal.html#foldl%27"><span class="hs-identifier hs-type">foldl'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679041111"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041111"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041111"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041111"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-267"></span><span id="foldl%27"><span class="annot"><span class="annottext">foldl' :: (a -&gt; Char -&gt; a) -&gt; a -&gt; Rope -&gt; a
</span><a href="Data.Rope.UTF16.Internal.html#foldl%27"><span class="hs-identifier hs-var hs-var">foldl'</span></a></span></span><span> </span><span id="local-6989586621679041109"><span class="annot"><span class="annottext">a -&gt; Char -&gt; a
</span><a href="#local-6989586621679041109"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679041108"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041108"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041107"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041107"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Chunk -&gt; a) -&gt; a -&gt; SplayTree Position Chunk -&gt; a
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">Foldable.foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679041105"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041105"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621679041104"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041104"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Char -&gt; a) -&gt; a -&gt; Text -&gt; a
forall a. (a -&gt; Char -&gt; a) -&gt; a -&gt; Text -&gt; a
</span><span class="hs-identifier hs-var">Text.foldl'</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Char -&gt; a
</span><a href="#local-6989586621679041109"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041105"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; a) -&gt; Text -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041104"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041108"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041107"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">-- | Fold right</span><span>
</span><span id="line-270"></span><span class="hs-comment">--</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-272"></span><span id="local-6989586621679041102"><span class="annot"><a href="Data.Rope.UTF16.Internal.html#foldr"><span class="hs-identifier hs-type">foldr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041102"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041102"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679041102"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-273"></span><span id="foldr"><span class="annot"><span class="annottext">foldr :: (Char -&gt; a -&gt; a) -&gt; a -&gt; Rope -&gt; a
</span><a href="Data.Rope.UTF16.Internal.html#foldr"><span class="hs-identifier hs-var hs-var">foldr</span></a></span></span><span> </span><span id="local-6989586621679041100"><span class="annot"><span class="annottext">Char -&gt; a -&gt; a
</span><a href="#local-6989586621679041100"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679041099"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041099"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041098"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041098"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Chunk -&gt; a -&gt; a) -&gt; a -&gt; SplayTree Position Chunk -&gt; a
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">Foldable.foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679041096"><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041096"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679041095"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041095"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; a -&gt; a) -&gt; a -&gt; Text -&gt; a
forall a. (Char -&gt; a -&gt; a) -&gt; a -&gt; Text -&gt; a
</span><span class="hs-identifier hs-var">Text.foldr</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; a -&gt; a
</span><a href="#local-6989586621679041100"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041095"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; a) -&gt; Text -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span> </span><span class="annot"><span class="annottext">Chunk
</span><a href="#local-6989586621679041096"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679041099"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041098"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- * Special folds</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-comment">-- | Do any characters in the rope satisfy the predicate?</span><span>
</span><span id="line-279"></span><span class="hs-comment">--</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-281"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#any"><span class="hs-identifier hs-type">any</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-282"></span><span id="any"><span class="annot"><span class="annottext">any :: (Char -&gt; Bool) -&gt; Rope -&gt; Bool
</span><a href="Data.Rope.UTF16.Internal.html#any"><span class="hs-identifier hs-var hs-var">any</span></a></span></span><span> </span><span id="local-6989586621679041092"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041092"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041091"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041091"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Any -&gt; Bool
</span><span class="hs-identifier hs-var hs-var">getAny</span></span><span> </span><span class="annot"><span class="annottext">(Any -&gt; Bool) -&gt; Any -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Chunk -&gt; Any) -&gt; SplayTree Position Chunk -&gt; Any
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Any
</span><span class="hs-identifier hs-var">Any</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Any) -&gt; (Chunk -&gt; Bool) -&gt; Chunk -&gt; Any
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">Text.any</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041092"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; (Chunk -&gt; Text) -&gt; Chunk -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041091"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-comment">-- | Do all characters in the rope satisfy the predicate?</span><span>
</span><span id="line-285"></span><span class="hs-comment">--</span><span>
</span><span id="line-286"></span><span class="hs-comment">-- @since 0.3.0.0</span><span>
</span><span id="line-287"></span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#all"><span class="hs-identifier hs-type">all</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-288"></span><span id="all"><span class="annot"><span class="annottext">all :: (Char -&gt; Bool) -&gt; Rope -&gt; Bool
</span><a href="Data.Rope.UTF16.Internal.html#all"><span class="hs-identifier hs-var hs-var">all</span></a></span></span><span> </span><span id="local-6989586621679041085"><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041085"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Rope.UTF16.Internal.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679041084"><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041084"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">All -&gt; Bool
</span><span class="hs-identifier hs-var hs-var">getAll</span></span><span> </span><span class="annot"><span class="annottext">(All -&gt; Bool) -&gt; All -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Chunk -&gt; All) -&gt; SplayTree Position Chunk -&gt; All
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; All
</span><span class="hs-identifier hs-var">All</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; All) -&gt; (Chunk -&gt; Bool) -&gt; Chunk -&gt; All
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">Text.all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679041085"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; (Chunk -&gt; Text) -&gt; Chunk -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Chunk -&gt; Text
</span><a href="Data.Rope.UTF16.Internal.html#chunkText"><span class="hs-identifier hs-var hs-var">chunkText</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplayTree Position Chunk
</span><a href="#local-6989586621679041084"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-289"></span></pre></body></html>